<html lang="cs">
<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="https://kubaboi.github.io/CheeseFramework/public/styles/alertStyle.css">
    <link rel="stylesheet" href="https://kubaboi.github.io/CheeseFramework/public/styles/autocompleteStyle.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Český svaz juda</title>
</head>
<body>
    <h1 id="h">Validating...</h1>
    <p id="p"></p>

    <script src="https://kubaboi.github.io/CheeseFramework/public/scripts/communication.js"></script>
    <script src="https://kubaboi.github.io/CheeseFramework/public/scripts/alerts.js"></script>
    <script src="https://kubaboi.github.io/CheeseFramework/public/scripts/elementManager.js"></script>

    <script>
        var header = document.getElementById("h");
        var p = document.getElementById("p");
        sendRequest();

        async function sendRequest() {
            var response = await callEndpoint("GET", "/users/create?code=&CODE&");
            if (!response.ERROR) {
                header.innerHTML = "Registration completed :)";
                p.innerHTML = "You will be redirected to login in few seconds."
                setTimeout("window.location.href=\"/\"", 3000);
            } 
            else {
                showAlert("An error occurred :(",
                    "We are very sorry. Please contact administrator." +
                    "<br><br>Error message:<br>" + response.ERROR);
            }
        }
    </script>
</body>
</html>